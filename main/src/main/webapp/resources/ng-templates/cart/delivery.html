<div class="cart-details" ng-controller="cartDeliveryCtrlr">
	<h4 class="cart-steps">
		Step3: <span ng-hide="deliveryOptionSelected">Choose a </span>Delivery
		Options
	</h4>

	<div class="cart-address" ng-show="deliveryOptionSelected">
		<div class="cart-address" ng-hide="m.addressSaved">

			<div class="marg-b2" ng-show="deliverySelected">
				<div class="pad1 bg-green2 white">
					<strong>Local Delivery</strong>
					<!-- <a href=""
					ng-click="resetDeliveryOptions()" class="inlineb pad-h1 inherit"><i
					class="fa fa-pencil" aria-hidden="true"></i> <em>change</em></a> -->
				</div>
				<div class="text-center pad05 cart-deliverytime" ng-show="deliveryTimeText!=''">
					<em>Delivery Date</em>: <strong>{{deliveryTimeText}}</strong> <small
						remaining-time="endTime"></small>
				</div>
			</div>

			<!-- 			<div class="pad1 bg-orange2 marg-b2 white"
				ng-show="shippingSelected">
				<strong>Overnight Shipping</strong> <a href=""
					ng-click="resetDeliveryOptions()" class="inlineb pad-h1 inherit"><i
					class="fa fa-pencil" aria-hidden="true"></i> <em>change</em></a>
			</div> -->
			
			<form id="cartAddress" name="cartAddress" ng-submit="saveDeliveryAddress()">
				<div class="row">
					<div class="col-sm-4">
						<div class="form-group">
							<label class="control-label">First Name<sup>*</sup></label> <input
								type="text" class="form-control" required="required"
								ng-model="m.order.shipping.address.firstName" ng-blur="formElemValidate($event)" />
							<p class="help-block onerror">First Name is required</p>
						</div>
					</div>
					<div class="col-sm-4">
						<div class="form-group">
							<label class="control-label">Last Name<sup>*</sup></label> <input
								type="text" class="form-control" required="required"
								ng-blur="formElemValidate($event)" ng-model="m.order.shipping.address.lastName" />
							<p class="help-block onerror">Last Name is required</p>
						</div>
					</div>
					<div class="col-sm-4">
						<div class="form-group">
							<label class="control-label">Phone<sup>*</sup></label> <input
								type="text" class="form-control" ng-model="m.order.shipping.address.phone"
								required="required" ng-blur="formElemValidate($event)" />
							<p class="help-block onerror">Phone number is required</p>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-8">
						<div class="form-group">
							<label class="control-label">Address<sup>*</sup></label> <input
								type="text" class="form-control" required="required"
								ng-blur="formElemValidate($event)" id="addressLocator"
								ng-model="m.order.shipping.address.address1" />
							<p class="help-block onerror">Address is required</p>
						</div>
					</div>
					<div class="col-sm-4">
						<div class="form-group">
							<label class="control-label">Suite/Apt</label> <input type="text"
								class="form-control" ng-model="m.order.shipping.address.address2" />
						</div>
					</div>
				</div>
				<div class="row marg-b3">
					<div class="col-sm-6">
						<div class="form-group">
							<label class="control-label">City<sup>*</sup></label> <input
								type="text" required="required" ng-blur="formElemValidate($event)"
								class="form-control" ng-model="m.order.shipping.address.city" />
							<p class="help-block onerror">City is required</p>
						</div>
					</div>
					<div class="col-sm-3">
						<div class="form-group">
							<label class="control-label">State<sup>*</sup></label> <input
								type="text" required="required" ng-blur="formElemValidate($event)"
								class="form-control" ng-model="m.order.shipping.address.state" />
							<p class="help-block onerror">State is required</p>
						</div>
					</div>
					<div class="col-sm-3">
						<div class="form-group">
							<label class="control-label">Zip Code<sup>*</sup></label> <input
								type="text" required="required" ng-blur="formElemValidate($event)" 
								class="form-control" ng-model="m.order.shipping.address.zip" />
							<p class="help-block onerror">Valid 5 digit zip-code is required</p>
						</div>
					</div>
				</div>

				<div class="marg-b2" ng-show="m.config.rushDeliveryCharge">
					<label class="fa-label show"><input type="checkbox"
						ng-model="m.order.shipping.rushDelivery" value="true" /><i
						class="fa fa-square-o" aria-hidden="true"></i> Expedite your order
						(Deliver within 60 minutes or less) <span class="pull-right">+{{m.config.rushDeliveryCharge
							| currency}}</span> <br />
					<span style="margin-left: 26px;">Guaranteed or rush fee
							waived!</span></label>
				</div>

				<div class="text-center">
					<button type="submit" class="btn btn-lb btn-lb-w"
						ng-disabled="cartAddress.$invalid">
						<strong>Save Delivery Options</strong>
					</button>
				</div>

			</form>
			
			<div ng-if="addressError">
				<div class="marg-t2">
					<div class="alert alert-danger" role="alert">
						<span ng-bind-html="addressError"></span>
					</div>
				</div>
			</div>
		</div>

		<div class="cart-address-info" ng-show="m.addressSaved">

			<div class="marg-b2" ng-show="deliverySelected">
				<div class="pad1 bg-green2 white">
					Delivery Method: <strong>Local Delivery</strong>
					<!-- <a href=""
					ng-click="resetDeliveryOptions()" class="inlineb pad-h1 inherit"><i
					class="fa fa-pencil" aria-hidden="true"></i> <em>change</em></a> -->
				</div>
				<div class="text-center pad05 cart-deliverytime" ng-show="deliveryTimeText!=''">
					<em>Delivery Date</em>: <strong>{{deliveryTimeText}} <span
						remaining-time="endTime"></span></strong>
				</div>
			</div>

<!-- 			<div class="pad1 bg-orange2 marg-b2 white"
				ng-show="shippingSelected">
				Delivery Method: <strong>Overnight Shipping</strong> <a href=""
					ng-click="resetDeliveryOptions()" class="inlineb pad-h1 inherit"><i
					class="fa fa-pencil" aria-hidden="true"></i> <em>change</em></a>
			</div> -->

			<div class="row">
				<div class="col-sm-5 marg-b2">
					<div class="delivery-address"></div>
				</div>
				<div class="col-sm-7">
					<h6>Address</h6>
					<div class="cart-address-holder">
						<div class="row">
							<div class="col-xs-8">
								<div>{{m.order.shipping.address.address1}} {{m.order.shipping.address.address2 ? ', '
									+ m.order.shipping.address.address2 : ''}}</div>
								<div>
									<small>{{m.order.shipping.address.city + ', ' + m.order.shipping.address.state
										+ ' ' + m.order.shipping.address.zip}}</small>
								</div>
							</div>
							<div class="col-xs-4 text-right">
								<a href="" ng-click="editAddress()" class="inlineb pad1 inherit"><i
									class="fa fa-pencil" aria-hidden="true"></i> <em>edit</em></a>
							</div>
						</div>
						<div ng-if="m.order.shipping.rushDelivery" class="marg-t2 orange1 small">
							<span>Expedited Delivery Requested 
								<strong>+{{m.order.shipping.rushFee | currency}}</strong></span>
						</div>
					</div>
					<div>
						<h6>Delivery Instructions</h6>
						<div>
							<textarea class="form-control"
								ng-model="m.order.notes.deliveryNotes"
								ng-change="saveDeliveryNotes()"
								ng-model-options="{updateOn: 'blur'}"
								placeholder="e.g. Gate code, call upon arrival, deliver after 5:30 pm, etc"></textarea>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

</div>

<div ng-if="!m.user._id">
	<div class="cart-details">
		<div class="alert alert-info marg-b0">
			Please <a href="/login?ret=/cart" class="u">login to you account</a>
			to review and place the order. If you don't have an account with us,
			please visit our <a href="/register" class="u">patient
				registration</a> page.
		</div>
	</div>
</div>